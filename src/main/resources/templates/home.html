<html>
<head th:replace="~{base::head}">

</head>

<body>
	<div th:replace="~{base :: logo}" />
	<div class="container">
		<div th:replace="~{base::titulo('Operações')}"></div>
		
		<form action="/home/searchByFilter" method="post" th:object="${requisicaoDespesaFilter}">
			<div class="input-group mb-3">
			  <input type="text" th:field="*{date}" class="form-control" placeholder="Pesquisar por um mes/ano. ex: 05/2022" aria-label="Pesquisar por um mes/ano. ex: 05/2022" aria-describedby="basic-addon2">
			  <div class="input-group-append">
			   	<button class="btn btn-outline-secondary" type="submit">Pesquisar</button></a>
			  </div>
			</div>
		</form>
		
		<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
		  <li class="nav-item" role="presentation">
		    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Despesas mês</button>
		  </li>
		  <li class="nav-item" role="presentation">
		    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Planejamento mês</button>
		  </li>
		 
		</ul>
		<div class="tab-content" id="pills-tabContent">
		  	<div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
		 		<a href="/operacao/formulario"><button class="btn btn-outline-secondary my-2 my-sm-0">Novo</button></a>
		  		<table 
				  	class="table table-striped  table-bordered"  
					data-show-pagination-switch="true"
				  	data-pagination="true"
					data-page-list="[10, 25, 50, 100, all]">
				    <thead>
				        <tr>
				            <th scope="col"> Descrição </th>
				            <th scope="col"> Valor </th>
				            <th scope="col"> Categoria </th>
				            <th scope="col"> Carteira </th>
				            <th scope="col"> Data </th>
				            <th scope="col"> Efetuada </th>
				            <th scope="col"> Ações </th>
				        </tr>
				    </thead>
				    <tbody>
						<tr th:if="${operacoes == null or operacoes.empty}">
				            <td colspan="2"> Nenhuma operação realizada. </td>
				        </tr>
				        <tr  th:each="operacao : ${operacoes}">
				            <td><span th:text="${operacao.descricao}"> Descrição </span></td>
				            <td><span th:text="${ 'R$ ' + operacao.valor}"></span></td>
				            <td><span th:text="${operacao.categoria}"> Categoria </span></td>
				             <td><span th:text="${operacao.carteira}"> Carteira </span></td>
				            <td><span th:text="${#temporals.format(operacao.data, 'dd/MM/yyyy')}"> Data </span></td>
				            <td><span th:text="${operacao.efetuada ? 'Sim' : 'Não' }"> Efetuada </span></td>
				            <td>
								<button
				            	 th:attr="data-object-id=${operacao.id}"
				            	 type="button" id="buttontest" class="btn btn-primary" 
				            	 data-toggle="modal" data-target="#despesaModal" 
				            	 >
									<i class="fa fa-search"></i>
				            	</button>
								<a th:href="@{/operacao/formulario/editar/{id}(id=${operacao.id})}" class="btn btn-primary">
									<i class="fa fa-edit"></i>
								</a>
								
							</td>
				        </tr>
				    </tbody>
				</table>
				<th:block th:replace="~{_modals :: modal('despesaModal', 'Despesa')}">modal</th:block>
		  </div>
		  
		  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
		  	<a href="/planejamentoMensal/formulario"><button class="btn btn-outline-secondary my-2 my-sm-0">Novo</button></a>
			<table class="table table-striped  table-bordered">
			    <thead>
			        <tr>
			        	
			            <th scope="col"> Descrição </th>
			            <th scope="col"> Valor </th>
			            <th scope="col"> Gasto </th>
			            <th scope="col"> Saldo </th>
			            <th scope="col"> Mês </th>
			            <th scope="col"> Ações </th>
			        </tr>
			    </thead>
			    <tbody>
					<tr th:if="${planejamentos.empty}">
			            <td colspan="2"> Nenhuma operação realizada. </td>
			        </tr>
			        <tr  th:each="planejamento : ${planejamentos}">
			            <td><span th:text="${planejamento.descricao}"> Descrição </span></td>
			            <td><span th:text="${ 'R$ ' + planejamento.valor}">Saldo</span></td>
			            <td><span th:text="${ 'R$ ' + #numbers.formatDecimal(planejamento.gasto, 0, 'COMMA', 2, 'POINT')}">Saldo</span></td>
			            <td><span th:text="${ 'R$ ' + #numbers.formatDecimal(planejamento.saldo, 0, 'COMMA', 2, 'POINT')}">Saldo</span></td>
			            <td><span th:text="${planejamento.mes + '/' + planejamento.ano}">Mês</span></td>
			            <td><a th:href="@{/planejamentoMensal/formulario/editar/{id}(id=${planejamento.id})}">Editar</a></td></td>
			        </tr>
			    </tbody>
			</table>

		  </div>
		</div>
		
	</div>
	<script type="text/javascript" th:src="@{/js/despesa/despesa.js}"></script>
</body>
</html>